<!--
  Generated template for the CreateCrmPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

	<ion-navbar>
		<ion-title>Create CRM</ion-title>
	</ion-navbar>

</ion-header>


<ion-content padding>
	<ion-list *ngIf="step == 0">
		<p>Select Type</p>

		<ion-list radio-group [(ngModel)]="inputData.type">
			<ion-item>
				<ion-label>Old Client</ion-label>
				<ion-radio value="CLIENT"></ion-radio>
			</ion-item>

			<ion-item>
				<ion-label>New Client</ion-label>
				<ion-radio value="PROSPEC"></ion-radio>
			</ion-item>


		</ion-list>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(0)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(0)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>

	</ion-list>
	<ion-list *ngIf="step == 1">

		<p>Select Client</p>

		<ion-item>
			<ion-label>Search Company *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.search_company"></ion-input>
			<button clear item-right icon-only (click)="searchCompany(inputData.search_company)"><ion-icon name="search"></ion-icon></button>
			
		</ion-item>
		<p>{{ messagesSearchCompany }}</p>

		<ion-item>
			<ion-label>Company *</ion-label>
			<ion-select [(ngModel)]="inputData.company_id" (ionChange)="getDetail(inputData.company_id)">
				<ion-option value="">Select Company</ion-option>
				<ion-option *ngFor="let list of company" [value]="list.id">{{list.name}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item>
			<ion-label>Brand</ion-label>
			<ion-select [(ngModel)]="inputData.brand_id">
				<ion-option value=""></ion-option>
				<ion-option *ngFor="let list of brand" [value]="list.id">{{list.brand}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item>
			<ion-label>PIC *</ion-label>
			<ion-select [(ngModel)]="inputData.pic_id">
				<ion-option value=""></ion-option>
				<ion-option *ngFor="let list of pic" [value]="list.id">{{list.fullname}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item>
			<ion-label>Address</ion-label>
			<ion-select [(ngModel)]="inputData.address_id">
				<ion-option value=""></ion-option>
				<ion-option *ngFor="let list of address" [value]="list.id">{{list.address}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(1)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(1)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>

	</ion-list>
	<ion-list *ngIf="step == 2">

		<p>Select Company</p>

		<ion-item>
			<ion-label>Search Company *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.search_company"></ion-input>
			<button clear item-right icon-only (click)="searchCompany(inputData.search_company)"><ion-icon name="search"></ion-icon></button>
		</ion-item>
		<p>{{ messagesSearchCompany }}</p>

		<ion-item>
			<ion-label>Company *</ion-label>
			<ion-select [(ngModel)]="inputData.company_id" (ionChange)="getDetail(inputData.company_id)">
				<ion-option value="">Select Company</ion-option>
				<ion-option *ngFor="let list of company" [value]="list.id">{{list.name}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item *ngIf="inputData.company_id != ''">
			<ion-label>Brand</ion-label>
			<ion-select [(ngModel)]="inputData.brand_id">
				<ion-option value=""></ion-option>
				<ion-option value="new">New</ion-option>
				<ion-option *ngFor="let list of brand" [value]="list.id">{{list.brand}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item *ngIf="inputData.company_id != '' && inputData.brand_id == 'new'">
			<ion-label stacked>New Brand</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.brand_prospec"></ion-input>
		</ion-item>

		<ion-item *ngIf="inputData.company_id != ''">
			<ion-label>Address</ion-label>
			<ion-select [(ngModel)]="inputData.address_id">
				<ion-option value=""></ion-option>
				<ion-option value="new">New</ion-option>
				<ion-option *ngFor="let list of address" [value]="list.id">{{list.address}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item *ngIf="inputData.company_id != '' && inputData.address_id == 'new'">
			<ion-label stacked>New Address</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.address_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-12>
						<button ion-button color="light" full (click)="setStep(3)">Create New</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(2)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(2)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>

	</ion-list>
	<ion-list *ngIf="step == 3">

		<p>Create Company</p>

		<ion-item>
			<ion-label stacked>Name Company *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.company_name_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Phone</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.company_phone_prospec"></ion-input>
		</ion-item>


		<ion-item>
			<ion-label stacked>Fax</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.company_fax_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Brand</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.brand_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Address</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.address_prospec"></ion-input>
		</ion-item>


		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(3)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(3)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
	</ion-list>

	<ion-list *ngIf="step == 4">

		<p>Select PIC</p>

		<ion-item>
			<ion-label>PIC *</ion-label>
			<ion-select [(ngModel)]="inputData.pic_id">
				<ion-option value=""></ion-option>
				<ion-option *ngFor="let list of pic" [value]="list.id">{{list.fullname}}</ion-option>
			</ion-select>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-12>
						<button ion-button color="light" full (click)="setStep(5)">Create New</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(4)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(4)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
	</ion-list>

	<ion-list *ngIf="step == 5">

		<p>Create PIC</p>

		<ion-item>
			<ion-label stacked>Fullname *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.pic_fullname_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Gender *</ion-label>
			<ion-select [(ngModel)]="inputData.pic_gender_prospec">
				<ion-option value=""></ion-option>
				<ion-option value="M">Male</ion-option>
				<ion-option value="F">Female</ion-option>
			</ion-select>
		</ion-item>


		<ion-item>
			<ion-label stacked>Position</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.pic_position_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Handphone *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.pic_phone_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-label stacked>Email *</ion-label>
			<ion-input type="text" placeholder="" clearInput [(ngModel)]="inputData.pic_email_prospec"></ion-input>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(5)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(5)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
	</ion-list>

	<ion-list *ngIf="step == 6">

		<p>Activity</p>

		<ion-item>
			<ion-label>Activity *</ion-label>
			<ion-select [(ngModel)]="inputData.activity">
				<ion-option value=""></ion-option>
				<ion-option *ngFor="let list of activity" [value]="list.value">{{list.name}}</ion-option>
			</ion-select>
			<ion-label color="danger">{{ errorData.activity }}</ion-label>
		</ion-item>


		<ion-item>
			<ion-label>Date *</ion-label>
			<ion-datetime displayFormat="DD MMMM YYYY" [min]="minDate" [max]="maxDate" [(ngModel)]="inputData.date_activity"></ion-datetime>
			<ion-label color="danger">{{ errorData.date_activity }}</ion-label>
		</ion-item>

		<ion-item>
			<ion-label>Time *</ion-label>
			<ion-datetime displayFormat="HH:mm" [(ngModel)]="inputData.time_activity"></ion-datetime>
			<ion-label color="danger">{{ errorData.time_activity }}</ion-label>
		</ion-item>

		<ion-item>
			<ion-grid>
				<ion-row>
					<ion-col col-6>
						<button ion-button color="light" full (click)="back(6)">Back</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="success" full (click)="checkValidation(6)">Next</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
	</ion-list>


</ion-content>
